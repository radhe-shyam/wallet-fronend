{"version":3,"sources":["api/wallet-backend.js","app.js","index.js"],"names":["walletBackend","axios","create","baseURL","headers","disableSwalConfig","allowEscapeKey","backdrop","allowOutsideClick","App","useState","user","setUser","transList","setTranslist","getUserDetails","a","get","id","data","localStorage","setItem","JSON","stringify","clear","getTransList","params","walletId","skip","limit","addOrPayMoney","action","Swal","fire","title","html","showCancelButton","confirmButtonText","showLoaderOnConfirm","preConfirm","amount","document","getElementById","value","description","RegExp","test","showValidationMessage","successMsg","post","then","result","name","catch","error","errorMsg","response","prettyMsg","focus","useEffect","oldUser","parse","getItem","e","text","input","inputPlaceholder","length","balance","newUser","className","onClick","map","ele","index","Date","date","toLocaleString","Math","abs","type","ReactDom","render","StrictMode"],"mappings":"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","file":"static/js/main.022eeeb4.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst walletBackend = axios.create({\n    baseURL: 'https://wallet--backend.herokuapp.com/api',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n});\n\nexport default walletBackend;","import Swal from 'sweetalert2'\nimport walletBackend from './api/wallet-backend';\nimport { useState, useEffect } from 'react';\nimport './app.css';\nconst disableSwalConfig = {\n    allowEscapeKey: false,\n    backdrop: true,\n    allowOutsideClick: false\n};\n\n\nconst App = () => {\n    const [user, setUser] = useState(null);\n    const [transList, setTranslist] = useState([]);\n    const getUserDetails = async (user) => {\n\n        try {\n            const { data: { data } } = await walletBackend.get(`/wallet/${user.id}`);\n            setUser(data);\n            localStorage.setItem('user', JSON.stringify(user));\n        } catch (error) {\n            localStorage.clear();\n        }\n    }\n    const getTransList = async (user) => {\n\n        try {\n            const { data: { data } } = await walletBackend.get(`/transactions`, {\n                params: {\n                    walletId: user.id,\n                    skip: 0,\n                    limit: 50\n                }\n            });\n            setTranslist(data);\n        } catch (error) {\n\n        }\n    }\n\n    const addOrPayMoney = (action) => {\n        const html = `\n            <form>\n             <label>Enter the amount(with max 4 decimal point). e.g. \"1000\" or \"10.5555\"</label><br/>\n             <input id=\"amount\" class=\"swal2-input\" placeholder=\"Amount\" type=\"number\" />\n             <input id=\"description\" class=\"swal2-input\" placeholder=\"Description\" type=\"text\" />\n            </form>\n        `;\n        Swal.fire({\n            title: `${action} Money`,\n            html: html,\n            showCancelButton: true,\n            confirmButtonText: action,\n            showLoaderOnConfirm: true,\n            ...disableSwalConfig,\n            preConfirm: () => {\n                let amount = +document.getElementById('amount').value;\n                let description = document.getElementById('description').value;\n                if (!amount || amount < 0.0001 || amount > 1000000 || !(new RegExp(/^\\d*(\\.\\d{1,4})?$/).test(amount))) return Swal.showValidationMessage(`Amount should be between 0.0001 to 1000000. Max. decimal points are 4`);\n                if (!description) Swal.showValidationMessage(`Description can't be empty`);\n                let successMsg = `You added INR ${amount} in your wallet!`;\n                if (action === 'Pay') {\n                    successMsg = `You paid INR ${amount} from your wallet!`;\n                    amount = -amount;\n                }\n                return walletBackend.post(`/transact/${user.id}`, {\n                    amount,\n                    description\n                }).then(result => {\n                    Swal.fire(`Good job! ${user.name}`, successMsg, \"success\");\n                    getUserDetails(user);\n                    getTransList(user);\n                }).catch(error => {\n                    let errorMsg = `Request failed: ${error}`;\n                    if (error && error.response && error.response.data) {\n                        errorMsg = error.response.data.prettyMsg;\n                    }\n                    Swal.showValidationMessage(errorMsg);\n                });\n            }\n        });\n        document.getElementById('amount').focus();\n    }\n    useEffect(() => {\n        let oldUser;\n        try {\n            oldUser = JSON.parse(localStorage.getItem('user'));\n        } catch (e) { }\n\n        walletBackend.get(`/health`); //just to warm up the backend server\n        if (oldUser && oldUser.id) {\n            getUserDetails(oldUser);\n            getTransList(oldUser);\n        } else {\n            Swal.fire({\n                title: 'Setup new wallet',\n                text: 'Enter your name. e.g. \"Madhav Sharma\".',\n                input: 'text',\n                inputPlaceholder: \"Name\",\n                showCancelButton: false,\n                confirmButtonText: 'Create!',\n                showLoaderOnConfirm: true,\n                ...disableSwalConfig,\n                preConfirm: (name) => {\n                    if (!name || name.length < 4 || name.length > 25) return Swal.showValidationMessage(`Name length should be between 4 to 25 characters`);\n                    return walletBackend.post('/wallet/setup', {\n                        name,\n                        balance: 0\n                    }).then(result => {\n                        let newUser = result.data.data;\n                        setUser(newUser)\n                        localStorage.setItem('user', JSON.stringify(newUser));\n                        Swal.fire(`Good job! ${result.data.data.name}`, \"Your wallet is ready to use!\", \"success\");\n                    }).catch(error => {\n                        let errorMsg = `Request failed: ${error}`;\n                        if (error && error.response && error.response.data) {\n                            errorMsg = error.response.data.prettyMsg;\n                        }\n                        Swal.showValidationMessage(errorMsg);\n                    });\n                }\n            });\n        }\n\n    }, []);// eslint-disable-line react-hooks/exhaustive-deps\n    return (\n        <>\n            {(user && user.id) ? (\n                <>\n                    <div className=\"ui raised very padded text container segment\">\n                        <div className=\"card\">\n                            <div className=\"content\">\n                                <div className=\"header\">\n                                    Hello, {user.name} ðŸ‘‹\n                                </div>\n                                <br></br>\n                                <div className=\"description\">\n                                    Current Balance: INR <b>{user.balance}</b>\n                                </div>\n                            </div>\n                            <div className=\"extra content\">\n                                <div className=\"ui two buttons\">\n                                    <div className=\"ui basic green button\" onClick={() => addOrPayMoney('Add')}>Add Money</div>\n                                    <div className=\"ui basic red button\" onClick={() => addOrPayMoney('Pay')}>Pay</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </>\n            ) : null\n            }\n            {(transList && transList.length) ? (\n                <>\n                    <div className=\"ui raised very padded text container segment\">\n                        <h1>Transactions</h1>\n                        <table className=\"ui celled table\">\n                            <thead>\n                                <tr><th>Date</th>\n                                    <th>Description</th>\n                                    <th>Amount</th>\n                                    <th>Balance</th>\n                                    <th>Type</th>\n                                </tr></thead>\n                            <tbody>\n                                {transList.map((ele, index) => (<tr key={index}>\n                                    <td data-label=\"Date\">{new Date(ele.date).toLocaleString()}</td>\n                                    <td data-label=\"Description\">{ele.description}</td>\n                                    <td data-label=\"Amount\">{Math.abs(ele.amount)}</td>\n                                    <td data-label=\"Balance\">{ele.balance}</td>\n                                    <td data-label=\"Type\">{ele.type}</td>\n                                </tr>))}\n                            </tbody>\n                        </table>\n                    </div>\n                </>\n            ) : null}\n        </>\n    );\n}\n\nexport default App;","import React from 'react';\nimport ReactDom from 'react-dom';\nimport App from './app';\n\nReactDom.render(\n    <React.StrictMode><App /></React.StrictMode>,\n    document.getElementById('root')\n);"],"sourceRoot":""}